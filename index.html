<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FANTASYAS</title>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;600;700;800&display=swap" rel="stylesheet"/>
  <style>
    * {margin:0; padding:0; box-sizing:border-box;}
    body {
      font-family:'Manrope',sans-serif; 
      background:#000; 
      color:#fff; 
      min-height:100vh; 
      overflow-x:hidden;
      transition: background 0.4s, color 0.4s;
    }
    body.light {
      background: #f8f9fa;
      color: #111;
    }
    body.large-font {
      font-size: 1.12rem;
    }
    .top-bar {
      position:fixed; top:0; left:0; right:0; height:80px; 
      display:flex; align-items:center; justify-content:space-between; 
      padding:0 20px; 
      background:rgba(0,0,0,0.4); backdrop-filter:blur(10px); 
      border-bottom:1px solid rgba(255,255,255,0.08); z-index:1000;
    }
    body.light .top-bar {background:rgba(255,255,255,0.7); border-bottom:1px solid rgba(0,0,0,0.08);}
    .site-name {
      font-size:1.8rem; font-weight:800; 
      background:linear-gradient(90deg,#fff,#aaa); 
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    body.light .site-name {background:linear-gradient(90deg,#000,#444); -webkit-text-fill-color:transparent;}
    .burger {width:30px; height:22px; display:flex; flex-direction:column; justify-content:space-between; cursor:pointer;}
    .burger span {height:3px; width:100%; background:#fff; border-radius:3px; transition:0.4s;}
    body.light .burger span {background:#000;}
    .burger.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px);}
    .burger.active span:nth-child(2){opacity:0;}
    .burger.active span:nth-child(3){transform:rotate(-45deg) translate(6px,-6px);}
    .sidebar {
      position:fixed; top:0; left:-280px; width:280px; height:100%; 
      background:#000; padding:120px 40px 40px; 
      border-right:1px solid rgba(255,255,255,0.06); transition:0.4s; z-index:900;
    }
    body.light .sidebar {background:#fff; border-right:1px solid rgba(0,0,0,0.06);}
    .sidebar.active {left:0;}
    .sidebar a {
      display:block; color:#aaa; text-decoration:none; 
      font-size:1.25rem; font-weight:700; margin:1.4rem 0; 
      transition:0.3s; cursor:pointer;
    }
    body.light .sidebar a {color:#555;}
    .sidebar a:hover{color:#fff; transform:translateX(8px);}
    body.light .sidebar a:hover {color:#000;}
    .main-content {margin-top:100px; padding:20px 25px;}
    .section {display:none; padding:0 8px;}
    .section.active {display:block;}
    .login-box, .new-post, .settings, .profile-edit-form {
      margin-bottom:20px; display:flex; flex-direction:column; gap:12px;
      background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); 
      border-radius:16px; padding:20px;
    }
    body.light .login-box, body.light .new-post, body.light .settings, body.light .profile-edit-form {
      background:rgba(0,0,0,0.03); border:1px solid rgba(0,0,0,0.08);
    }
    input, textarea {
      padding:12px; border-radius:12px; 
      border:1px solid rgba(255,255,255,0.1); 
      background:rgba(255,255,255,0.08); color:#fff; 
      outline:none; font-family:'Manrope',sans-serif; resize:vertical;
    }
    body.light input, body.light textarea {
      background:#fff; color:#000; border:1px solid #ddd;
    }
    input::placeholder, textarea::placeholder {color:#aaa;}
    button {
      width:fit-content; padding:10px 18px; border:none; border-radius:12px; 
      background:#fff; color:#000; font-weight:700; cursor:pointer; transition:0.2s;
    }
    body.light button {background:#000; color:#fff;}
    button:hover {opacity:0.9;}
    .danger-btn {background:#c53030 !important; color:#fff !important;}
    .danger-btn:hover {background:#a71d2a !important;}
    .feed {display:flex; flex-direction:column; gap:20px;}
    .post {
      background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); 
      border-radius:16px; padding:18px;
    }
    body.light .post {background:rgba(0,0,0,0.03); border:1px solid rgba(0,0,0,0.08);}
    .post-header {display:flex; align-items:center; gap:12px; margin-bottom:12px;}
    .avatar {
      width:48px; height:48px; background:#444; border-radius:50%; 
      background-size:cover; background-position:center;
    }
    body.light .avatar {background:#ccc;}
    .username {font-weight:700; font-size:1.05rem;}
    .post-content {font-size:0.95rem; line-height:1.5; margin-bottom:12px;}
    .post-meta {color:#888; font-size:0.8rem; margin-top:4px;}
    .post-footer {display:flex; gap:20px; margin-top:12px;}
    .post-footer button {background:none; border:none; color:#aaa; cursor:pointer; display:flex; align-items:center; gap:6px;}
    body.light .post-footer button {color:#666;}
    .post-footer button:hover {color:#fff;}
    body.light .post-footer button:hover {color:#000;}
    .heart, .bubble, .star {
      width:18px; height:18px; display:inline-block; background-size:contain; background-repeat:no-repeat;
    }
    .heart {background:url('data:image/svg+xml;utf8,<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21C12 21 4 13.5 4 8.5C4 5.42 6.42 3 9.5 3C11.24 3 12.91 3.81 13.5 5.09C14.09 3.81 15.76 3 17.5 3C20.58 3 23 5.42 23 8.5C23 13.5 15 21 15 21H12Z"/></svg>') center/contain;}
    .bubble {background:url('data:image/svg+xml;utf8,<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z"/></svg>') center/contain;}
    .star {background:url('data:image/svg+xml;utf8,<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>') center/contain;}
    .liked .heart {color:#ff3366; fill:#ff3366;}
    .favorited .star {color:#ffc107; fill:#ffc107;}
    .comments-section {margin-top:16px; padding-top:12px; border-top:1px solid rgba(255,255,255,0.08);}
    body.light .comments-section {border-top:1px solid rgba(0,0,0,0.08);}
    .comment {font-size:0.9rem; margin:8px 0; padding-left:12px; border-left:3px solid #555;}
    body.light .comment {border-left:3px solid #aaa;}
    .comment strong {color:#ddd;}
    body.light .comment strong {color:#333;}
    .comment-input {display:flex; gap:10px; margin-top:12px;}
    .comment-input input {flex:1;}
    .modal {
      position:fixed; inset:0; background:rgba(0,0,0,0.7); 
      display:none; align-items:center; justify-content:center; z-index:2000;
    }
    .modal.active {display:flex;}
    .modal-content {
      background:#111; width:90%; max-width:500px; border-radius:16px; 
      padding:28px; position:relative; border:1px solid rgba(255,255,255,0.15);
    }
    body.light .modal-content {background:#fff; border:1px solid #ddd; color:#000;}
    .close-modal {position:absolute; top:12px; right:16px; font-size:1.8rem; cursor:pointer; color:#aaa;}
    body.light .close-modal {color:#555;}
    .profile-header {display:flex; align-items:center; gap:20px; margin-bottom:30px; flex-wrap:wrap;}
    .profile-avatar {width:120px; height:120px; border-radius:50%; background:#333; background-size:cover;}
    body.light .profile-avatar {background:#ddd;}
    .profile-info h2 {font-size:2rem;}
    .profile-bio {color:#bbb; margin:12px 0; line-height:1.6;}
    body.light .profile-bio {color:#444;}
    .profile-stats {display:grid; grid-template-columns:repeat(auto-fit, minmax(140px, 1fr)); gap:16px; margin:30px 0;}
    .stat-card {
      background:rgba(255,255,255,0.06); padding:20px; border-radius:12px; 
      text-align:center; border:1px solid rgba(255,255,255,0.08);
    }
    body.light .stat-card {background:rgba(0,0,0,0.04); border:1px solid rgba(0,0,0,0.1);}
    .stat-number {font-size:2.2rem; font-weight:800;}
    .stat-label {color:#aaa; font-size:0.95rem;}
    body.light .stat-label {color:#666;}

    @media(max-width:900px){
      .sidebar{width:100%; left:-100%; padding:100px 20px; border-right:none; border-bottom:1px solid rgba(255,255,255,0.06);}
      .sidebar.active{left:0;}
    }
    .hashtag {
      color: #1da1f2;
      font-weight: 600;
      text-decoration: none;
    }
    body.light .hashtag {
      color: #1a8cd8;
    }
    .hashtag:hover {
      text-decoration: underline;
    }
    .post-content img {
      max-width: 100%;
      border-radius: 12px;
      margin-top: 10px;
      display: block;
    }
    .messages-list, .groups-list {display:flex; flex-direction:column; gap:10px;}
    .message-item, .group-item {background:rgba(255,255,255,0.05); padding:12px; border-radius:12px; cursor:pointer;}
    .chat-window {display:flex; flex-direction:column; height:400px; overflow-y:auto; gap:10px; padding:10px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.1); border-radius:12px;}
    .chat-message {padding:8px 12px; border-radius:8px; max-width:70%;}
    .chat-message.sent {background:#007bff; align-self:flex-end;}
    .chat-message.received {background:#333; align-self:flex-start;}
    .notifications {display:flex; flex-direction:column; gap:10px; margin-top:20px;}
    .notification {background:rgba(255,255,255,0.05); padding:12px; border-radius:12px;}
  </style>
</head>
<body>

<div class="top-bar">
  <div class="burger" id="burger"><span></span><span></span><span></span></div>
  <div class="site-name">FANTASYAS</div>
</div>

<nav class="sidebar" id="sidebar">
  <a data-section="home">–ì–æ–ª–æ–≤–Ω–∞</a>
  <a data-section="profile">–ü—Ä–æ—Ñ—ñ–ª—å</a>
  <a data-section="messages">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</a>
  <a data-section="groups">–ì—Ä—É–ø–∏</a>
  <a data-section="notifications">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</a>
  <a data-section="settings">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</a>
  <a href="#">–ü—Ä–æ –Ω–∞—Å</a>
  <a href="#">–ü–æ—Å–ª—É–≥–∏</a>
  <a href="#">–ü–æ—Ä—Ç—Ñ–æ–ª—ñ–æ</a>
  <a href="#">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
</nav>

<main class="main-content">

  <!-- ‚îÄ‚îÄ –ì–æ–ª–æ–≤–Ω–∞ ‚îÄ‚îÄ -->
  <div id="home" class="section active">
    <div class="login-box" id="loginBox">
      <input type="text" id="usernameInput" placeholder="–í–≤–µ–¥—ñ—Ç—å —Å–≤–æ—î —ñ–º'—è">
      <button id="saveUsername">–ü–æ—á–∞—Ç–∏</button>
    </div>

    <div class="new-post" id="newPostBox" style="display:none;">
      <textarea id="postText" placeholder="–©–æ —É —Ç–µ–±–µ –Ω–∞ –¥—É–º—Ü—ñ?..." rows="4"></textarea>
      
      <!-- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ -->
      <div style="margin:12px 0; display:flex; align-items:center; gap:12px; flex-wrap:wrap;">
        <label for="postImage" style="cursor:pointer; padding:8px 14px; background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.15); border-radius:10px; color:#aaa;">
          üìé –î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ/–º–µ–º
        </label>
        <input type="file" id="postImage" accept="image/*" style="display:none;" />
        <div id="imagePreview" style="max-width:180px; display:none; border-radius:10px; overflow:hidden; border:1px solid rgba(255,255,255,0.1);">
          <img style="width:100%; display:block;" />
        </div>
        <span id="imageName" style="color:#888; font-size:0.9rem;"></span>
      </div>

      <label><input type="checkbox" id="postPrivate"> –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –ø–æ—Å—Ç (–≤–∏–¥–Ω–æ —Ç—ñ–ª—å–∫–∏ —Ç–æ–±—ñ)</label>

      <button id="addPost">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
    </div>

    <div class="feed" id="feed"></div>
  </div>

  <!-- ‚îÄ‚îÄ –ü—Ä–æ—Ñ—ñ–ª—å ‚îÄ‚îÄ -->
  <div id="profile" class="section">
    <div class="profile-header">
      <div class="profile-avatar" id="profileAvatar"></div>
      <div>
        <h2 id="profileUsernameDisplay"></h2>
        <p class="profile-meta">–ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ: <span id="registerDate"></span></p>
      </div>
      <button id="editProfileBtn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>
    </div>

    <p class="profile-bio" id="profileBio">–ù–µ–º–∞—î –æ–ø–∏—Å—É...</p>

    <div class="profile-stats">
      <div class="stat-card"><div class="stat-number" id="postCount">0</div><div class="stat-label">–ø–æ—Å—Ç—ñ–≤</div></div>
      <div class="stat-card"><div class="stat-number" id="likeCount">0</div><div class="stat-label">–ª–∞–π–∫—ñ–≤ –æ—Ç—Ä–∏–º–∞–Ω–æ</div></div>
      <div class="stat-card"><div class="stat-number" id="commentCount">0</div><div class="stat-label">–∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤</div></div>
      <div class="stat-card"><div class="stat-number" id="favoriteCount">0</div><div class="stat-label">–≤ –æ–±—Ä–∞–Ω–æ–º—É</div></div>
    </div>

    <h3 style="margin:40px 0 20px;">–¢–≤–æ—ó –ø–æ—Å—Ç–∏</h3>
    <div id="profilePosts" class="feed"></div>
  </div>

  <!-- ‚îÄ‚îÄ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚îÄ‚îÄ -->
  <div id="messages" class="section">
    <h2>–ü—Ä–∏–≤–∞—Ç–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</h2>
    <div class="messages-list" id="messagesList"></div>
    <div class="new-message">
      <input type="text" id="dmTo" placeholder="–ö–æ–º—É (—ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)">
      <textarea id="dmText" placeholder="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." rows="2"></textarea>
      <button id="sendDm">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
    </div>
    <div id="chatWindow" class="chat-window" style="display:none;"></div>
  </div>

  <!-- ‚îÄ‚îÄ –ì—Ä—É–ø–∏ ‚îÄ‚îÄ -->
  <div id="groups" class="section">
    <h2>–ì—Ä—É–ø–∏ / –ß–∞—Ç–∏</h2>
    <div class="groups-list" id="groupsList"></div>
    <div class="new-group">
      <input type="text" id="groupName" placeholder="–ù–∞–∑–≤–∞ –≥—Ä—É–ø–∏">
      <input type="text" id="groupMembers" placeholder="–£—á–∞—Å–Ω–∏–∫–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É)">
      <button id="createGroup">–°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É</button>
    </div>
    <div id="groupChatWindow" class="chat-window" style="display:none;"></div>
    <div class="group-message-input" style="display:none;">
      <textarea id="groupMessageText" placeholder="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—É..." rows="2"></textarea>
      <button id="sendGroupMessage">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è ‚îÄ‚îÄ -->
  <div id="notifications" class="section">
    <h2>–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</h2>
    <div class="notifications" id="notificationsList"></div>
    <button id="clearNotifications">–û—á–∏—Å—Ç–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</button>
  </div>

  <!-- ‚îÄ‚îÄ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚îÄ‚îÄ -->
  <div id="settings" class="section">
    <h2>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
    <div class="settings">
      <label>–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</label>
      <input type="text" id="changeUsername" placeholder="–ù–æ–≤–µ —ñ–º'—è">

      <label>–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∞–≤–∞—Ç–∞—Ä (URL)</label>
      <input type="url" id="changeAvatar" placeholder="https://example.com/avatar.jpg">

      <label>–ü—Ä–æ —Å–µ–±–µ / –±—ñ–æ</label>
      <textarea id="changeBio" placeholder="–†–æ–∑–∫–∞–∂–∏ –ø—Ä–æ —Å–µ–±–µ..." rows="4"></textarea>

      <div style="margin:20px 0;">
        <label>–¢–µ–º–∞:</label><br>
        <select id="themeSelect">
          <option value="dark">–¢–µ–º–Ω–∞ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)</option>
          <option value="light">–°–≤—ñ—Ç–ª–∞</option>
        </select>
      </div>

      <div style="margin:20px 0;">
        <label>–†–æ–∑–º—ñ—Ä —Ç–µ–∫—Å—Ç—É:</label><br>
        <select id="fontSizeSelect">
          <option value="normal">–ó–≤–∏—á–∞–π–Ω–∏–π</option>
          <option value="large">–í–µ–ª–∏–∫–∏–π</option>
        </select>
      </div>

      <button id="saveSettings">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>

      <hr style="margin:40px 0; border-color:rgba(255,255,255,0.1);">

      <button class="danger-btn" id="logoutBtn">–í–∏–π—Ç–∏ –∑ –∞–∫–∞—É–Ω—Ç—É</button>
      <button class="danger-btn" id="deleteAccountBtn">–í–∏–¥–∞–ª–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç</button>
      <button class="danger-btn" id="clearAllData">–û—á–∏—Å—Ç–∏—Ç–∏ –í–°–Ü –¥–∞–Ω—ñ —Å–∞–π—Ç—É</button>
    </div>
  </div>

</main>

<!-- –ú–æ–¥–∞–ª–∫–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é -->
<div class="modal" id="editProfileModal">
  <div class="modal-content">
    <span class="close-modal" id="closeModal">&times;</span>
    <h2>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</h2>
    <div class="profile-edit-form">
      <label>–ê–≤–∞—Ç–∞—Ä (URL)</label>
      <input type="url" id="editAvatar" placeholder="https://...">

      <label>–ë—ñ–æ</label>
      <textarea id="editBio" rows="5"></textarea>

      <button id="saveProfileEdit">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
    </div>
  </div>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const KEY = {
  USERNAME: 'fantasyasUsername',
  USER: 'fantasyasUserData',
  POSTS: 'fantasyas_posts_v3',
  MESSAGES: 'fantasyas_messages',
  GROUPS: 'fantasyas_groups',
  NOTIFICATIONS: 'fantasyas_notifications'
};

let username = localStorage.getItem(KEY.USERNAME);
let userData = JSON.parse(localStorage.getItem(KEY.USER)) || {
  avatar: '',
  bio: '',
  registered: new Date().toISOString().split('T')[0],
  favorites: [],
  lastSeen: Date.now()
};
let posts = JSON.parse(localStorage.getItem(KEY.POSTS)) || [];
let messages = JSON.parse(localStorage.getItem(KEY.MESSAGES)) || [];
let groups = JSON.parse(localStorage.getItem(KEY.GROUPS)) || [];
let notifications = JSON.parse(localStorage.getItem(KEY.NOTIFICATIONS)) || [];

// –ï–ª–µ–º–µ–Ω—Ç–∏
const burger = document.getElementById('burger');
const sidebar = document.getElementById('sidebar');
const sections = document.querySelectorAll('.section');
const loginBox = document.getElementById('loginBox');
const newPostBox = document.getElementById('newPostBox');
const feed = document.getElementById('feed');
const postText = document.getElementById('postText');
const modal = document.getElementById('editProfileModal');
let pendingImage = null;
let pendingImageName = '';
let currentChatUser = null;
let currentGroupId = null;

// ‚îÄ‚îÄ –ë—É—Ä–≥–µ—Ä —Ç–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è ‚îÄ‚îÄ
burger.addEventListener('click', () => {
  burger.classList.toggle('active');
  sidebar.classList.toggle('active');
});

function showSection(id) {
  sections.forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  sidebar.classList.remove('active');
  burger.classList.remove('active');
  if (id === 'profile') updateProfile();
  if (id === 'home') renderPosts();
  if (id === 'messages') renderMessages();
  if (id === 'groups') renderGroups();
  if (id === 'notifications') renderNotifications();
  // –æ—á–∏—â–∞—î–º–æ —Ñ–æ—Ä–º—É –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞ –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å–µ–∫—Ü—ñ—ó
  if (id !== 'home') {
    postText.value = '';
    pendingImage = null;
    pendingImageName = '';
    document.getElementById('imagePreview').style.display = 'none';
    document.getElementById('imageName').textContent = '';
    document.getElementById('postImage').value = '';
  }
}

document.querySelectorAll('[data-section]').forEach(el => {
  el.addEventListener('click', () => showSection(el.dataset.section));
});

// ‚îÄ‚îÄ –¢–µ–º–∞ —Ç–∞ —à—Ä–∏—Ñ—Ç ‚îÄ‚îÄ
function applyPreferences() {
  const theme = localStorage.getItem('fantasyasTheme') || 'dark';
  const font = localStorage.getItem('fantasyasFontSize') || 'normal';
  document.body.classList.toggle('light', theme === 'light');
  document.body.classList.toggle('large-font', font === 'large');
  document.getElementById('themeSelect').value = theme;
  document.getElementById('fontSizeSelect').value = font;
}

applyPreferences();

// ‚îÄ‚îÄ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è ‚îÄ‚îÄ
if (username) {
  loginBox.style.display = 'none';
  newPostBox.style.display = 'flex';
  applyPreferences();
} else {
  newPostBox.style.display = 'none';
}

document.getElementById('saveUsername').addEventListener('click', () => {
  const val = document.getElementById('usernameInput').value.trim();
  if (!val) return alert('–í–≤–µ–¥–∏ —ñ–º‚Äô—è');
  username = val;
  localStorage.setItem(KEY.USERNAME, username);
  if (!userData.registered) userData.registered = new Date().toISOString().split('T')[0];
  localStorage.setItem(KEY.USER, JSON.stringify(userData));
  loginBox.style.display = 'none';
  newPostBox.style.display = 'flex';
  renderPosts();
});

// ‚îÄ‚îÄ –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è ‚îÄ‚îÄ
document.getElementById('postImage').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (!file) return;

  if (!file.type.startsWith('image/')) {
    alert('–¢—ñ–ª—å–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, –±—É–¥—å –ª–∞—Å–∫–∞');
    return;
  }

  if (file.size > 5 * 1024 * 1024) {   // 5 MB –ª—ñ–º—ñ—Ç
    alert('–§–∞–π–ª –∑–∞–≤–µ–ª–∏–∫–∏–π (–º–∞–∫—Å–∏–º—É–º ~5 –ú–ë)');
    return;
  }

  const reader = new FileReader();
  reader.onload = function(ev) {
    pendingImage = ev.target.result;  // —Ü–µ data:image/jpeg;base64,...
    pendingImageName = file.name;

    // –ü—Ä–µ–≤'—é
    const preview = document.getElementById('imagePreview');
    const img = preview.querySelector('img');
    img.src = pendingImage;
    preview.style.display = 'block';
    document.getElementById('imageName').textContent = pendingImageName;
  };
  reader.readAsDataURL(file);
});

// ‚îÄ‚îÄ –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Å—Ç–∞ ‚îÄ‚îÄ
document.getElementById('addPost').addEventListener('click', () => {
  const text = postText.value.trim();
  if (!text || !username) return;
  const isPrivate = document.getElementById('postPrivate').checked;
  posts.unshift({
    id: Date.now(),
    username,
    text,
    image: pendingImage || null,
    private: isPrivate,
    likes: 0,
    likedBy: [],
    comments: [],
    created: new Date().toISOString()
  });
  savePosts();
  postText.value = '';
  pendingImage = null;
  pendingImageName = '';
  document.getElementById('imagePreview').style.display = 'none';
  document.getElementById('imageName').textContent = '';
  document.getElementById('postImage').value = '';
  document.getElementById('postPrivate').checked = false;
  renderPosts();
  checkNotifications();
});

// ‚îÄ‚îÄ –†–µ–Ω–¥–µ—Ä —Å—Ç—Ä—ñ—á–∫–∏ ‚îÄ‚îÄ
function renderPosts(container = feed) {
  container.innerHTML = '';
  const filteredPosts = posts.filter(post => !post.private || post.username === username);
  filteredPosts.forEach(post => {
    const isLiked = post.likedBy?.includes(username);
    const isFavorite = userData.favorites?.includes(post.id);
    const postEl = document.createElement('div');
    postEl.className = 'post';
    postEl.innerHTML = `
      <div class="post-header">
        <div class="avatar" style="background-image:url('${getAvatar(post.username)}')"></div>
        <div class="username">${post.username}</div>
      </div>
      <div class="post-content">
        ${formatPostText(post.text)}
        ${post.image ? `<img src="${post.image}" alt="–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è" />` : ''}
      </div>
      <div class="post-meta">${new Date(post.created).toLocaleString('uk-UA', {dateStyle:'short', timeStyle:'short'})} ${post.private ? '(–ø—Ä–∏–≤–∞—Ç–Ω–∏–π)' : ''}</div>
      <div class="post-footer">
        <button class="like-btn ${isLiked ? 'liked' : ''}">
          <span class="heart"></span> ${post.likes || 0}
        </button>
        <button class="comment-btn">
          <span class="bubble"></span> ${post.comments?.length || 0}
        </button>
        <button class="favorite-btn ${isFavorite ? 'favorited' : ''}">
          <span class="star"></span> ${isFavorite ? '–í –æ–±—Ä–∞–Ω–æ–º—É' : '–î–æ–¥–∞—Ç–∏ –≤ –æ–±—Ä–∞–Ω–µ'}
        </button>
      </div>
      <div class="comments-section" id="comments-${post.id}"></div>
      <div class="comment-input">
        <input type="text" placeholder="–ö–æ–º–µ–Ω—Ç–∞—Ä..." class="comment-inp"/>
        <button class="add-comment-btn">‚Üí</button>
      </div>
    `;

    // –õ–∞–π–∫
    postEl.querySelector('.like-btn').addEventListener('click', () => {
      if (!username) return alert('–£–≤—ñ–π–¥–∏');
      if (!post.likedBy) post.likedBy = [];
      const idx = post.likedBy.indexOf(username);
      if (idx === -1) {
        post.likedBy.push(username);
        post.likes = (post.likes || 0) + 1;
        addNotification(post.username, `${username} –≤–ø–æ–¥–æ–±–∞–≤ —Ç–≤—ñ–π –ø–æ—Å—Ç`);
      } else {
        post.likedBy.splice(idx, 1);
        post.likes--;
      }
      savePosts();
      renderPosts(container);
      if (container !== feed) updateProfile();
    });

    // –ö–æ–º–µ–Ω—Ç–∞—Ä
    const inp = postEl.querySelector('.comment-inp');
    const btn = postEl.querySelector('.add-comment-btn');
    btn.addEventListener('click', () => {
      const text = inp.value.trim();
      if (!text || !username) return;
      if (!post.comments) post.comments = [];
      post.comments.push({user: username, text, time: Date.now()});
      inp.value = '';
      addNotification(post.username, `${username} –ø—Ä–æ–∫–æ–º–µ–Ω—Ç—É–≤–∞–≤ —Ç–≤—ñ–π –ø–æ—Å—Ç`);
      savePosts();
      renderComments(post.id, postEl.querySelector(`#comments-${post.id}`));
      renderPosts(container);
    });

    // –û–±—Ä–∞–Ω–µ
    postEl.querySelector('.favorite-btn').addEventListener('click', () => {
      if (!username) return alert('–£–≤—ñ–π–¥–∏');
      if (!userData.favorites) userData.favorites = [];
      const idx = userData.favorites.indexOf(post.id);
      if (idx === -1) {
        userData.favorites.push(post.id);
      } else {
        userData.favorites.splice(idx, 1);
      }
      localStorage.setItem(KEY.USER, JSON.stringify(userData));
      renderPosts(container);
      if (container !== feed) updateProfile();
    });

    renderComments(post.id, postEl.querySelector(`#comments-${post.id}`));
    container.prepend(postEl);
  });
}

function renderComments(postId, container) {
  container.innerHTML = '';
  const post = posts.find(p => p.id === postId);
  (post?.comments || []).forEach(c => {
    const div = document.createElement('div');
    div.className = 'comment';
    div.innerHTML = `<strong>${c.user}</strong>: ${c.text}`;
    container.appendChild(div);
  });
}

function getAvatar(uname) {
  if (uname === username) return userData.avatar || '';
  return '';
}

function formatPostText(text) {
  let escaped = text
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#039;');
  escaped = escaped.replace(/\n/g, '<br>');
  escaped = escaped.replace(/(^|\s)(#[a-zA-Z0-9_]+)/g, '$1<a href="#" class="hashtag">$2</a>');
  return escaped;
}

// ‚îÄ‚îÄ –ü—Ä–æ—Ñ—ñ–ª—å ‚îÄ‚îÄ
function updateProfile() {
  if (!username) return;

  document.getElementById('profileUsernameDisplay').textContent = username;
  document.getElementById('registerDate').textContent = userData.registered || '–Ω–µ–≤—ñ–¥–æ–º–æ';
  document.getElementById('profileBio').textContent = userData.bio || '–ù–µ–º–∞—î –æ–ø–∏—Å—É...';
  document.getElementById('profileAvatar').style.backgroundImage = `url('${userData.avatar || ''}')`;

  let postCount = 0, likeCount = 0, commentCount = 0;
  posts.forEach(p => {
    if (p.username === username) {
      postCount++;
      likeCount += p.likes || 0;
      commentCount += p.comments?.length || 0;
    }
  });

  document.getElementById('postCount').textContent = postCount;
  document.getElementById('likeCount').textContent = likeCount;
  document.getElementById('commentCount').textContent = commentCount;
  document.getElementById('favoriteCount').textContent = userData.favorites?.length || 0;

  // –¢–≤–æ—ó –ø–æ—Å—Ç–∏
  const profilePosts = document.getElementById('profilePosts');
  profilePosts.innerHTML = '';
  renderPosts(profilePosts);
}

// ‚îÄ‚îÄ –ü—Ä–∏–≤–∞—Ç–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚îÄ‚îÄ
function renderMessages() {
  const list = document.getElementById('messagesList');
  list.innerHTML = '';
  const users = [...new Set(messages.map(m => m.from === username ? m.to : m.from))];
  users.forEach(u => {
    const item = document.createElement('div');
    item.className = 'message-item';
    item.textContent = u;
    item.addEventListener('click', () => openChat(u));
    list.appendChild(item);
  });
}

document.getElementById('sendDm').addEventListener('click', () => {
  const to = document.getElementById('dmTo').value.trim();
  const text = document.getElementById('dmText').value.trim();
  if (!to || !text) return;
  messages.push({from: username, to, text, time: Date.now()});
  saveMessages();
  addNotification(to, `${username} –Ω–∞–¥—ñ—Å–ª–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è`);
  document.getElementById('dmText').value = '';
  renderMessages();
});

function openChat(user) {
  currentChatUser = user;
  const chatWindow = document.getElementById('chatWindow');
  chatWindow.style.display = 'block';
  renderChatMessages(chatWindow, messages.filter(m => (m.from === username && m.to === user) || (m.from === user && m.to === username)));
  // –î–æ–¥–∞—Ç–∏ —ñ–Ω–ø—É—Ç –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
  if (!chatWindow.querySelector('.dm-input')) {
    const inputDiv = document.createElement('div');
    inputDiv.className = 'comment-input';
    inputDiv.innerHTML = `
      <input type="text" placeholder="–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏..." class="dm-inp"/>
      <button class="send-dm-btn">‚Üí</button>
    `;
    inputDiv.querySelector('.send-dm-btn').addEventListener('click', () => {
      const text = inputDiv.querySelector('.dm-inp').value.trim();
      if (!text) return;
      messages.push({from: username, to: user, text, time: Date.now()});
      saveMessages();
      addNotification(user, `${username} –Ω–∞–¥—ñ—Å–ª–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è`);
      inputDiv.querySelector('.dm-inp').value = '';
      renderChatMessages(chatWindow, messages.filter(m => (m.from === username && m.to === user) || (m.from === user && m.to === username)));
    });
    chatWindow.appendChild(inputDiv);
  }
}

function renderChatMessages(container, msgs) {
  container.innerHTML = '';
  msgs.sort((a,b) => a.time - b.time).forEach(m => {
    const div = document.createElement('div');
    div.className = `chat-message ${m.from === username ? 'sent' : 'received'}`;
    div.innerHTML = `<strong>${m.from}</strong>: ${m.text}`;
    container.appendChild(div);
  });
  container.scrollTop = container.scrollHeight;
}

// ‚îÄ‚îÄ –ì—Ä—É–ø–∏ / –ß–∞—Ç–∏ ‚îÄ‚îÄ
function renderGroups() {
  const list = document.getElementById('groupsList');
  list.innerHTML = '';
  groups.forEach(g => {
    const item = document.createElement('div');
    item.className = 'group-item';
    item.textContent = g.name;
    item.addEventListener('click', () => openGroupChat(g.id));
    list.appendChild(item);
  });
}

document.getElementById('createGroup').addEventListener('click', () => {
  const name = document.getElementById('groupName').value.trim();
  const membersStr = document.getElementById('groupMembers').value.trim();
  if (!name || !membersStr) return;
  const members = membersStr.split(',').map(m => m.trim()).filter(m => m);
  if (!members.includes(username)) members.push(username);
  const group = {id: Date.now(), name, members, messages: []};
  groups.push(group);
  saveGroups();
  document.getElementById('groupName').value = '';
  document.getElementById('groupMembers').value = '';
  renderGroups();
});

function openGroupChat(groupId) {
  currentGroupId = groupId;
  const group = groups.find(g => g.id === groupId);
  if (!group) return;
  const chatWindow = document.getElementById('groupChatWindow');
  chatWindow.style.display = 'block';
  document.querySelector('.group-message-input').style.display = 'flex';
  renderChatMessages(chatWindow, group.messages);
}

document.getElementById('sendGroupMessage').addEventListener('click', () => {
  if (!currentGroupId) return;
  const text = document.getElementById('groupMessageText').value.trim();
  if (!text) return;
  const group = groups.find(g => g.id === currentGroupId);
  group.messages.push({from: username, text, time: Date.now()});
  group.members.forEach(member => {
    if (member !== username) addNotification(member, `–ù–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—ñ ${group.name}`);
  });
  saveGroups();
  document.getElementById('groupMessageText').value = '';
  renderChatMessages(document.getElementById('groupChatWindow'), group.messages);
});

// ‚îÄ‚îÄ –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è ‚îÄ‚îÄ
function addNotification(to, text) {
  if (to === username) return; // –Ω–µ —Å–ø–æ–≤—ñ—â–∞—Ç–∏ —Å–µ–±–µ
  notifications.push({to, text, time: Date.now(), read: false});
  saveNotifications();
}

function renderNotifications() {
  const list = document.getElementById('notificationsList');
  list.innerHTML = '';
  const userNotifs = notifications.filter(n => n.to === username);
  userNotifs.forEach(n => {
    const div = document.createElement('div');
    div.className = 'notification';
    div.textContent = `${n.text} (${new Date(n.time).toLocaleString()})`;
    if (!n.read) div.style.fontWeight = 'bold';
    div.addEventListener('click', () => {
      n.read = true;
      saveNotifications();
      renderNotifications();
    });
    list.appendChild(div);
  });
}

document.getElementById('clearNotifications').addEventListener('click', () => {
  notifications = notifications.filter(n => n.to !== username);
  saveNotifications();
  renderNotifications();
});

function checkNotifications() {
  // –°–∏–º—É–ª—è—Ü—ñ—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É: –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ
  renderNotifications();
}

// ‚îÄ‚îÄ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚îÄ‚îÄ
document.getElementById('saveSettings').addEventListener('click', () => {
  const newName = document.getElementById('changeUsername').value.trim();
  const newAvatar = document.getElementById('changeAvatar').value.trim();
  const newBio = document.getElementById('changeBio').value.trim();

  if (newName && newName !== username) {
    if (!confirm(`–ó–º—ñ–Ω–∏—Ç–∏ —ñ–º'—è –Ω–∞ "${newName}"?`)) return;
    posts.forEach(p => {
      if (p.username === username) p.username = newName;
      p.comments?.forEach(c => { if (c.user === username) c.user = newName; });
    });
    messages.forEach(m => {
      if (m.from === username) m.from = newName;
      if (m.to === username) m.to = newName;
    });
    groups.forEach(g => {
      g.members = g.members.map(m => m === username ? newName : m);
      g.messages.forEach(msg => { if (msg.from === username) msg.from = newName; });
    });
    notifications.forEach(n => { if (n.to === username) n.to = newName; });
    username = newName;
    localStorage.setItem(KEY.USERNAME, username);
  }

  userData.avatar = newAvatar;
  userData.bio = newBio;
  localStorage.setItem(KEY.USER, JSON.stringify(userData));
  saveAll();

  alert('–ó–º—ñ–Ω–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–æ!');
  updateProfile();
  renderPosts();
});

document.getElementById('themeSelect').addEventListener('change', e => {
  localStorage.setItem('fantasyasTheme', e.target.value);
  applyPreferences();
});

document.getElementById('fontSizeSelect').addEventListener('change', e => {
  localStorage.setItem('fantasyasFontSize', e.target.value);
  applyPreferences();
});

document.getElementById('logoutBtn').addEventListener('click', () => {
  if (confirm('–í–∏–π—Ç–∏?')) {
    localStorage.removeItem(KEY.USERNAME);
    location.reload();
  }
});

document.getElementById('deleteAccountBtn').addEventListener('click', () => {
  if (confirm('–í–∏–¥–∞–ª–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç? –í—Å—ñ —Ç–≤–æ—ó –ø–æ—Å—Ç–∏ —Ç–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –±—É–¥—É—Ç—å –≤–∏–¥–∞–ª–µ–Ω—ñ!')) {
    posts = posts.filter(p => p.username !== username);
    messages = messages.filter(m => m.from !== username && m.to !== username);
    groups = groups.filter(g => !g.members.includes(username));
    notifications = notifications.filter(n => n.to !== username);
    localStorage.removeItem(KEY.USERNAME);
    localStorage.removeItem(KEY.USER);
    saveAll();
    location.reload();
  }
});

document.getElementById('clearAllData').addEventListener('click', () => {
  if (confirm('–û—á–∏—Å—Ç–∏—Ç–∏ –í–°–Ü –¥–∞–Ω—ñ –Ω–∞–∑–∞–≤–∂–¥–∏?')) {
    localStorage.clear();
    location.reload();
  }
});

// ‚îÄ‚îÄ –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é (–º–æ–¥–∞–ª–∫–∞) ‚îÄ‚îÄ
document.getElementById('editProfileBtn').addEventListener('click', () => {
  document.getElementById('editAvatar').value = userData.avatar || '';
  document.getElementById('editBio').value = userData.bio || '';
  modal.classList.add('active');
});

document.getElementById('closeModal').addEventListener('click', () => modal.classList.remove('active'));
document.getElementById('saveProfileEdit').addEventListener('click', () => {
  userData.avatar = document.getElementById('editAvatar').value.trim();
  userData.bio = document.getElementById('editBio').value.trim();
  localStorage.setItem(KEY.USER, JSON.stringify(userData));
  modal.classList.remove('active');
  updateProfile();
  alert('–ü—Ä–æ—Ñ—ñ–ª—å –æ–Ω–æ–≤–ª–µ–Ω–æ!');
});

// ‚îÄ‚îÄ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è ‚îÄ‚îÄ
function savePosts() {
  localStorage.setItem(KEY.POSTS, JSON.stringify(posts));
}
function saveMessages() {
  localStorage.setItem(KEY.MESSAGES, JSON.stringify(messages));
}
function saveGroups() {
  localStorage.setItem(KEY.GROUPS, JSON.stringify(groups));
}
function saveNotifications() {
  localStorage.setItem(KEY.NOTIFICATIONS, JSON.stringify(notifications));
}
function saveAll() {
  savePosts();
  saveMessages();
  saveGroups();
  saveNotifications();
}

// –ü–æ—á–∞—Ç–æ–∫
if (username) {
  renderPosts();
  updateProfile();
  checkNotifications();
}
</script>
</body>
</html><style>
*{margin:0;padding:0;box-sizing:border-box}

:root{
  --bg:#0f0f12;
  --card:#17171c;
  --border:rgba(255,255,255,.06);
  --text:#f2f2f2;
  --muted:#8b8b95;
  --accent:#6c5ce7;
  --accent2:#00d4ff;
  --danger:#ff4d6d;
}

body{
  font-family:'Manrope',sans-serif;
  background:linear-gradient(135deg,#0f0f12,#141420);
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
  transition:.3s;
}

body.light{
  --bg:#f4f6fb;
  --card:#ffffff;
  --border:rgba(0,0,0,.08);
  --text:#111;
  --muted:#666;
  background:linear-gradient(135deg,#f4f6fb,#e9edf7);
}

body.large-font{font-size:1.1rem}

/* TOP BAR */
.top-bar{
  position:fixed;
  top:0;left:0;right:0;
  height:75px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 25px;
  backdrop-filter:blur(20px);
  background:rgba(15,15,20,.6);
  border-bottom:1px solid var(--border);
  z-index:1000;
}

body.light .top-bar{
  background:rgba(255,255,255,.7);
}

.site-name{
  font-weight:800;
  font-size:1.7rem;
  letter-spacing:.5px;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* BURGER */
.burger{width:28px;height:20px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer}
.burger span{
  height:3px;
  background:var(--text);
  border-radius:4px;
  transition:.3s;
}
.burger.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px)}
.burger.active span:nth-child(2){opacity:0}
.burger.active span:nth-child(3){transform:rotate(-45deg) translate(5px,-5px)}

/* SIDEBAR */
.sidebar{
  position:fixed;
  top:0;
  left:-280px;
  width:260px;
  height:100%;
  padding:110px 30px;
  background:var(--card);
  backdrop-filter:blur(20px);
  border-right:1px solid var(--border);
  transition:.35s;
  z-index:900;
}
.sidebar.active{left:0}

.sidebar a{
  display:block;
  padding:10px 0;
  font-weight:600;
  color:var(--muted);
  text-decoration:none;
  transition:.25s;
}
.sidebar a:hover{
  color:var(--accent);
  transform:translateX(6px);
}

/* MAIN */
.main-content{
  margin-top:95px;
  padding:20px;
  max-width:900px;
  margin-left:auto;
  margin-right:auto;
}

.section{display:none}
.section.active{
  display:block;
  animation:fade .3s ease;
}

@keyframes fade{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}

/* CARDS */
.login-box,.new-post,.settings,.profile-edit-form,.post,.message-item,.group-item,.notification{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
}

/* INPUTS */
input,textarea,select{
  width:100%;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(255,255,255,.03);
  color:var(--text);
  font-family:'Manrope',sans-serif;
  transition:.2s;
}

input:focus,textarea:focus,select:focus{
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(108,92,231,.2);
}

textarea{resize:vertical}

/* BUTTON */
button{
  padding:10px 18px;
  border-radius:14px;
  border:none;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#fff;
  font-weight:700;
  cursor:pointer;
  transition:.2s;
}
button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,.3)}

.danger-btn{
  background:linear-gradient(135deg,#ff4d6d,#c9184a)!important;
}

/* POSTS */
.feed{display:flex;flex-direction:column;gap:20px}

.post{
  transition:.25s;
}
.post:hover{
  transform:translateY(-3px);
  box-shadow:0 15px 35px rgba(0,0,0,.25);
}

.post-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}

.avatar{
  width:48px;height:48px;
  border-radius:50%;
  background:#333;
  background-size:cover;
  background-position:center;
  border:2px solid var(--border);
}

.username{font-weight:700}

.post-content{line-height:1.6;margin-bottom:10px}

.post-content img{
  max-width:100%;
  border-radius:14px;
  margin-top:12px;
}

.post-meta{
  font-size:.8rem;
  color:var(--muted);
}

.post-footer{
  display:flex;
  gap:20px;
  margin-top:15px;
}

.post-footer button{
  background:none;
  padding:0;
  color:var(--muted);
  font-weight:600;
}
.post-footer button:hover{
  color:var(--accent);
  transform:none;
  box-shadow:none;
}

/* COMMENTS */
.comments-section{
  margin-top:15px;
  padding-top:10px;
  border-top:1px solid var(--border);
}

.comment{
  padding:8px 12px;
  border-left:3px solid var(--accent);
  margin:6px 0;
  font-size:.9rem;
}

/* CHAT */
.chat-window{
  height:400px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:10px;
  padding:15px;
  border-radius:18px;
  background:var(--card);
  border:1px solid var(--border);
}

.chat-message{
  padding:10px 14px;
  border-radius:16px;
  max-width:70%;
  font-size:.9rem;
}

.chat-message.sent{
  align-self:flex-end;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#fff;
}

.chat-message.received{
  align-self:flex-start;
  background:rgba(255,255,255,.05);
}

/* PROFILE */
.profile-header{
  display:flex;
  gap:20px;
  align-items:center;
  flex-wrap:wrap;
  margin-bottom:25px;
}

.profile-avatar{
  width:120px;height:120px;
  border-radius:50%;
  background:#333;
  background-size:cover;
  border:3px solid var(--accent);
}

.profile-stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
  gap:15px;
  margin:30px 0;
}

.stat-card{
  text-align:center;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:18px;
}

.stat-number{
  font-size:2rem;
  font-weight:800;
}

.stat-label{
  color:var(--muted);
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:2000;
}
.modal.active{display:flex}

.modal-content{
  width:90%;
  max-width:500px;
  border-radius:20px;
  background:var(--card);
  padding:30px;
  border:1px solid var(--border);
  animation:fade .3s ease;
}

.close-modal{
  position:absolute;
  top:15px;
  right:20px;
  cursor:pointer;
  font-size:1.6rem;
  color:var(--muted);
}

/* MOBILE */
@media(max-width:900px){
  .sidebar{width:100%;left:-100%}
}
</style>
