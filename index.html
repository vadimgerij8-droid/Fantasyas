<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes"/>
  <title>FANTASYAS ¬∑ –¢–í –≤–µ—Ä—Å—ñ—è</title>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  <style>
    /* ========== –ì–õ–û–ë–ê–õ–¨–ù–Ü –°–¢–ò–õ–Ü ========== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Manrope', sans-serif;
      -webkit-tap-highlight-color: transparent;
    }

    :root {
      --bg: #ffffff;
      --surface: #f5f5f7;
      --card: #ffffff;
      --border: #e0e0e0;
      --text-primary: #1c1c1e;
      --text-secondary: #6c6c70;
      --text-tertiary: #8e8e93;
      --accent: #000000;
      --accent-hover: #333333;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
      --shadow-md: 0 4px 16px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
      --transition: 0.2s ease;
      --radius-sm: 12px;
      --radius-md: 16px;
      --radius-lg: 24px;
      --sidebar-width: 280px;
      --header-height: 60px;
      --base-font-size: 16px;
      --btn-padding: 10px 18px;
      --avatar-size: 48px;
    }

    /* –¢–í-—Ä–µ–∂–∏–º: –∑–±—ñ–ª—å—à–µ–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏ */
    body.tv-mode {
      --base-font-size: 20px;
      --btn-padding: 16px 28px;
      --avatar-size: 64px;
      font-size: var(--base-font-size);
    }

    body.dark {
      --bg: #000000;
      --surface: #1c1c1e;
      --card: #2c2c2e;
      --border: #3a3a3c;
      --text-primary: #ffffff;
      --text-secondary: #8e8e93;
      --text-tertiary: #666668;
      --accent: #ffffff;
      --accent-hover: #e0e0e0;
      --shadow-sm: 0 2px 8px rgba(255,255,255,0.04);
      --shadow-md: 0 4px 16px rgba(255,255,255,0.08);
      --shadow-lg: 0 8px 24px rgba(255,255,255,0.12);
    }

    body {
      background: var(--bg);
      color: var(--text-primary);
      min-height: 100vh;
      transition: background var(--transition), color var(--transition);
      font-size: var(--base-font-size);
      line-height: 1.5;
    }

    /* –§–æ–∫—É—Å –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –ø—É–ª—å—Ç–æ–º */
    .focused {
      outline: 4px solid var(--accent) !important;
      outline-offset: 4px;
      transform: scale(1.02);
      transition: all 0.1s ease;
      box-shadow: var(--shadow-lg);
    }

    .sidebar-backdrop {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(4px);
      z-index: 999;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .sidebar-backdrop.active {
      display: block;
      opacity: 1;
    }

    .app {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    .sidebar {
      width: var(--sidebar-width);
      background: var(--surface);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      padding: 20px 0;
      overflow-y: auto;
      transition: transform 0.3s cubic-bezier(0.2, 0.9, 0.3, 1);
      z-index: 1000;
    }

    .sidebar-header {
      padding: 0 20px 20px;
      border-bottom: 1px solid var(--border);
    }

    .logo {
      font-size: 2rem;
      font-weight: 800;
      letter-spacing: -0.5px;
      color: var(--text-primary);
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px 20px;
      margin: 4px 8px;
      border-radius: var(--radius-md);
      color: var(--text-secondary);
      transition: all var(--transition);
      cursor: pointer;
      font-weight: 500;
      font-size: 1.1rem;
    }

    .nav-item:hover, .nav-item.focused {
      background: var(--card);
      color: var(--text-primary);
    }

    .nav-item.active {
      background: var(--accent);
      color: var(--bg);
    }

    .nav-item .icon {
      width: 28px;
      height: 28px;
      stroke: currentColor;
      stroke-width: 1.8;
      fill: none;
    }

    .nav-item .badge {
      margin-left: auto;
      background: var(--accent);
      color: var(--bg);
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      background: var(--bg);
    }

    .top-bar {
      height: var(--header-height);
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      padding: 0 20px;
      gap: 16px;
    }

    .menu-toggle {
      display: none;
      width: 30px;
      height: 24px;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
      position: relative;
      z-index: 1001;
    }

    .menu-toggle span {
      height: 3px;
      width: 100%;
      background: var(--text-primary);
      border-radius: 3px;
      transition: transform 0.3s ease, opacity 0.2s ease;
    }

    .menu-toggle.active span:nth-child(1) { transform: rotate(45deg) translate(6px, 6px); }
    .menu-toggle.active span:nth-child(2) { opacity: 0; }
    .menu-toggle.active span:nth-child(3) { transform: rotate(-45deg) translate(6px, -6px); }

    .top-bar-title {
      font-size: 1.6rem;
      font-weight: 700;
    }

    .content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      scroll-behavior: smooth;
    }

    .section {
      display: none;
    }
    .section.active {
      display: block;
    }

    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        transform: translateX(-100%);
        box-shadow: var(--shadow-lg);
      }
      .sidebar.open {
        transform: translateX(0);
      }
      .menu-toggle {
        display: flex;
      }
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 24px;
      box-shadow: var(--shadow-sm);
      transition: box-shadow var(--transition), transform var(--transition);
    }

    .card:hover, .card.focused {
      box-shadow: var(--shadow-md);
    }

    .avatar {
      width: var(--avatar-size);
      height: var(--avatar-size);
      border-radius: 50%;
      background: var(--surface);
      background-size: cover;
      background-position: center;
      border: 2px solid var(--border);
      cursor: pointer;
      transition: border-color var(--transition);
    }

    .avatar.small {
      width: calc(var(--avatar-size) * 0.7);
      height: calc(var(--avatar-size) * 0.7);
    }

    .avatar.large {
      width: calc(var(--avatar-size) * 1.5);
      height: calc(var(--avatar-size) * 1.5);
    }

    .online-indicator {
      display: inline-block;
      width: 14px;
      height: 14px;
      background: #4caf50;
      border-radius: 50%;
      border: 2px solid var(--card);
      margin-left: 8px;
    }

    .btn {
      padding: var(--btn-padding);
      border-radius: var(--radius-md);
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text-primary);
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 1rem;
    }

    .btn:hover, .btn.focused {
      background: var(--accent);
      color: var(--bg);
      border-color: var(--accent);
    }

    .btn-primary {
      background: var(--accent);
      color: var(--bg);
      border-color: var(--accent);
    }

    .btn-primary:hover, .btn-primary.focused {
      background: var(--accent-hover);
    }

    .btn-icon {
      padding: var(--btn-padding);
    }

    .input {
      width: 100%;
      padding: 16px 22px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-primary);
      font-size: 1.1rem;
      outline: none;
      transition: border-color var(--transition);
    }

    .input:focus, .input.focused {
      border-color: var(--accent);
    }

    .feed {
      display: flex;
      flex-direction: column;
      gap: 28px;
    }

    .post {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px 20px 16px;
      box-shadow: var(--shadow-sm);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      animation: fadeIn 0.3s ease;
      position: relative;
    }
    .post:hover, .post.focused {
      box-shadow: var(--shadow-md);
      transform: scale(1.01);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .post-header {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
      align-items: center;
    }
    .post-header .avatar {
      width: calc(var(--avatar-size) * 0.9);
      height: calc(var(--avatar-size) * 0.9);
    }
    .post-author-info {
      flex: 1;
    }
    .post-author {
      font-weight: 700;
      cursor: pointer;
      display: inline-block;
      margin-right: 8px;
      font-size: 1.2rem;
    }
    .post-author:hover {
      text-decoration: underline;
    }
    .post-meta {
      color: var(--text-tertiary);
      font-size: 0.95rem;
    }
    .post-time {
      color: var(--text-tertiary);
      font-size: 0.85rem;
      margin-left: auto;
    }

    .post-actions {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
    }
    .post-actions button {
      background: none;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      font-size: 1.5rem;
      padding: 6px;
      border-radius: 50%;
      transition: background var(--transition);
    }
    .post-actions button:hover, .post-actions button.focused {
      background: var(--surface);
    }

    .post-content {
      margin-bottom: 16px;
      white-space: pre-wrap;
      font-size: 1.1rem;
      line-height: 1.5;
    }

    .post-media {
      width: 100%;
      border-radius: var(--radius-md);
      margin: 12px 0;
      cursor: pointer;
      max-height: 600px;
      object-fit: cover;
    }

    .post-footer {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .post-footer button {
      background: none;
      border: none;
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-secondary);
      font-weight: 600;
      cursor: pointer;
      transition: color var(--transition);
      font-size: 1rem;
    }

    .post-footer button:hover, .post-footer button.focused {
      color: var(--accent);
    }

    .post-footer button.liked {
      color: #ff3040;
    }
    .post-footer button.liked svg {
      fill: #ff3040;
    }

    .post-footer button.saved {
      color: #f5a623;
    }
    .post-footer button.saved svg {
      fill: #f5a623;
    }

    .comments-section {
      margin-top: 20px;
      border-top: 1px solid var(--border);
      padding-top: 20px;
    }

    .comment {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }

    .comment-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      flex-shrink: 0;
    }

    .comment-content {
      flex: 1;
      background: var(--surface);
      padding: 12px 16px;
      border-radius: var(--radius-md);
    }

    .comment-author {
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      display: inline-block;
      margin-right: 10px;
    }

    .comment-text {
      font-size: 1rem;
      word-break: break-word;
    }

    .comment-time {
      font-size: 0.85rem;
      color: var(--text-tertiary);
      margin-top: 4px;
    }

    .comment-form {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      align-items: center;
    }

    .comment-input {
      flex: 1;
      padding: 14px 18px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-primary);
      font-size: 1rem;
    }

    .emoji-picker-container {
      position: relative;
      display: inline-block;
    }

    .emoji-button {
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      padding: 8px 12px;
      color: var(--text-secondary);
    }

    .emoji-picker {
      position: absolute;
      bottom: 100%;
      right: 0;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 10px;
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 6px;
      z-index: 10;
      box-shadow: var(--shadow-lg);
      max-width: 250px;
      max-height: 200px;
      overflow-y: auto;
    }

    .emoji-picker span {
      font-size: 2rem;
      cursor: pointer;
      text-align: center;
      padding: 6px;
      border-radius: var(--radius-sm);
      transition: background 0.1s;
    }

    .emoji-picker span:hover, .emoji-picker span.focused {
      background: var(--surface);
    }

    .chat-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .chat-item {
      display: flex;
      align-items: center;
      gap: 18px;
      padding: 16px;
      border-radius: var(--radius-md);
      background: var(--card);
      border: 1px solid var(--border);
      cursor: pointer;
      transition: background var(--transition);
    }

    .chat-item:hover, .chat-item.focused {
      background: var(--surface);
    }

    .chat-item.unread {
      border-left: 4px solid var(--accent);
    }

    .chat-info {
      flex: 1;
    }

    .chat-name {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 1.2rem;
    }

    .chat-last {
      color: var(--text-tertiary);
      font-size: 1rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .chat-time {
      color: var(--text-tertiary);
      font-size: 0.9rem;
    }

    .chat-badge {
      background: var(--accent);
      color: var(--bg);
      border-radius: 50%;
      min-width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      font-weight: 600;
    }

    .chat-window {
      display: flex;
      flex-direction: column;
      height: 100%;
      background: var(--card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .chat-header {
      padding: 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .chat-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .message {
      max-width: 70%;
      padding: 14px 18px;
      border-radius: 24px;
      word-break: break-word;
      font-size: 1.1rem;
    }

    .message.sent {
      background: var(--accent);
      color: var(--bg);
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .message.received {
      background: var(--surface);
      color: var(--text-primary);
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }

    .group-message-sender {
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 4px;
      color: var(--text-secondary);
    }

    .typing-indicator {
      color: var(--text-tertiary);
      font-size: 1rem;
      padding: 8px 12px;
      font-style: italic;
    }

    .chat-input-area {
      display: flex;
      padding: 16px;
      border-top: 1px solid var(--border);
      gap: 12px;
      align-items: center;
    }

    .chat-input-area input {
      flex: 1;
    }

    .group-list, .channel-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .group-item, .channel-item {
      display: flex;
      align-items: center;
      gap: 18px;
      padding: 18px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: background var(--transition);
    }

    .group-item:hover, .group-item.focused,
    .channel-item:hover, .channel-item.focused {
      background: var(--surface);
    }

    .group-avatar, .channel-avatar {
      width: calc(var(--avatar-size) * 1.2);
      height: calc(var(--avatar-size) * 1.2);
      border-radius: 50%;
      background: var(--surface);
      background-size: cover;
    }

    .group-info, .channel-info {
      flex: 1;
    }

    .group-name, .channel-name {
      font-weight: 700;
      font-size: 1.3rem;
    }

    .group-meta, .channel-meta {
      color: var(--text-tertiary);
      font-size: 1rem;
    }

    .profile-header {
      display: flex;
      gap: 28px;
      margin-bottom: 28px;
      flex-wrap: wrap;
    }

    .profile-stats {
      display: flex;
      gap: 28px;
      margin: 18px 0;
      font-size: 1.1rem;
    }

    .profile-tabs {
      display: flex;
      gap: 12px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 12px;
      margin-bottom: 24px;
    }

    .profile-tab {
      padding: 12px 24px;
      border-radius: var(--radius-md);
      cursor: pointer;
      font-weight: 600;
      color: var(--text-secondary);
      font-size: 1.1rem;
    }

    .profile-tab.active, .profile-tab.focused {
      background: var(--accent);
      color: var(--bg);
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(8px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--card);
      border-radius: var(--radius-lg);
      padding: 28px;
      max-width: 520px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-close {
      font-size: 2.5rem;
      line-height: 1;
      cursor: pointer;
    }

    #toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--accent);
      color: var(--bg);
      padding: 16px 32px;
      border-radius: 40px;
      font-weight: 500;
      box-shadow: var(--shadow-lg);
      z-index: 3000;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
      font-size: 1.2rem;
    }
    #toast.show {
      opacity: 1;
    }

    .skeleton {
      background: linear-gradient(90deg, var(--surface) 25%, var(--card) 50%, var(--surface) 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 1.5s infinite;
      border-radius: var(--radius-md);
    }
    @keyframes skeleton-loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
  </style>
</head>
<body>
<div class="app">
  <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="logo">FANTASYAS</div>
    </div>
    <nav class="nav">
      <div class="nav-item active" data-section="home" tabindex="0">
        <svg class="icon" viewBox="0 0 24 24"><path d="M3 10l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        –ì–æ–ª–æ–≤–Ω–∞
      </div>
      <div class="nav-item" data-section="search" tabindex="0">
        <svg class="icon" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        –ü–æ—à—É–∫
      </div>
      <div class="nav-item" data-section="profile" tabindex="0">
        <svg class="icon" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        –ü—Ä–æ—Ñ—ñ–ª—å
      </div>
      <div class="nav-item" data-section="chats" tabindex="0">
        <svg class="icon" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        –ß–∞—Ç–∏
        <span class="badge" id="unreadBadge" style="display:none;">0</span>
      </div>
      <div class="nav-item" data-section="groups" tabindex="0">
        <svg class="icon" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        –ì—Ä—É–ø–∏
      </div>
      <div class="nav-item" data-section="channels" tabindex="0">
        <svg class="icon" viewBox="0 0 24 24"><path d="M4 4l16 8-16 8V4z"/></svg>
        –ö–∞–Ω–∞–ª–∏
      </div>
      <div class="nav-item" data-section="settings" tabindex="0">
        <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H5.78a1.65 1.65 0 0 0-1.51 1 1.65 1.65 0 0 0 .33 1.82l.07.07A10 10 0 0 0 12 17.66a10 10 0 0 0 6.26-2.26z"/></svg>
        –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
      </div>
    </nav>
  </aside>

  <main class="main">
    <div class="top-bar">
      <div class="menu-toggle" id="menuToggle">
        <span></span><span></span><span></span>
      </div>
      <div class="top-bar-title" id="pageTitle">–ì–æ–ª–æ–≤–Ω–∞</div>
    </div>

    <div class="content" id="content">
      <!-- –°–µ–∫—Ü—ñ—è –ì–æ–ª–æ–≤–Ω–∞ -->
      <div id="home" class="section active">
        <div class="card" id="authBox">
          <div id="loginForm">
            <input type="text" id="loginNickname" class="input" placeholder="–ü—Å–µ–≤–¥–æ–Ω—ñ–º (–±–µ–∑ @)" autocomplete="off" tabindex="0"/>
            <input type="password" id="loginPassword" class="input" placeholder="–ü–∞—Ä–æ–ª—å" tabindex="0"/>
            <button class="btn btn-primary" id="loginBtn" style="width:100%; margin-top:16px;" tabindex="0">–£–≤—ñ–π—Ç–∏</button>
            <div style="display:flex; gap:12px; margin-top:18px;">
              <button class="btn" id="googleLoginBtn" style="flex:1;" tabindex="0">Google</button>
              <button class="btn" id="appleLoginBtn" style="flex:1;" tabindex="0">Apple</button>
            </div>
            <p style="margin-top:24px;">–ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç–∞? <span id="toRegister" style="color:var(--accent);cursor:pointer;" tabindex="0">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</span></p>
            <p><a href="#" id="forgotPassword" style="color:var(--accent);" tabindex="0">–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?</a></p>
          </div>
          <div id="registerForm" style="display:none;">
            <input type="text" id="registerNickname" class="input" placeholder="–ü—Å–µ–≤–¥–æ–Ω—ñ–º (–±–µ–∑ @)" tabindex="0"/>
            <input type="password" id="registerPassword" class="input" placeholder="–ü–∞—Ä–æ–ª—å" tabindex="0"/>
            <button class="btn btn-primary" id="registerBtn" style="width:100%; margin-top:16px;" tabindex="0">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            <p style="margin-top:24px;">–í–∂–µ —î –∞–∫–∞—É–Ω—Ç? <span id="toLogin" style="color:var(--accent);cursor:pointer;" tabindex="0">–£–≤—ñ–π—Ç–∏</span></p>
          </div>
        </div>

        <div class="card" id="newPostBox" style="display:none;">
          <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 12px;">
            <textarea id="postText" class="input" placeholder="–©–æ –Ω–æ–≤–æ–≥–æ?" rows="3" style="flex:1;" tabindex="0"></textarea>
            <div class="emoji-picker-container">
              <button class="emoji-button" id="postEmojiBtn" tabindex="0">üòä</button>
              <div class="emoji-picker" id="postEmojiPicker" style="display: none;"></div>
            </div>
          </div>
          <input type="file" id="postMedia" accept="image/*,video/*" style="margin:12px 0;" tabindex="0"/>
          <button class="btn btn-primary" id="addPost" tabindex="0">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
        </div>

        <div class="feed-header" style="display:flex; gap:12px; margin-bottom:24px;">
          <button class="btn" id="feedNewBtn" tabindex="0">–ù–æ–≤—ñ</button>
          <button class="btn" id="feedPopularBtn" tabindex="0">–ü–æ–ø—É–ª—è—Ä–Ω—ñ</button>
        </div>

        <div class="feed" id="feed"></div>
        <div class="feed-end-sentinel" id="feedSentinel"></div>
        <div id="skeletonContainer" style="display:none;">
          <div class="skeleton" style="height:250px; margin-bottom:20px;"></div>
          <div class="skeleton" style="height:250px;"></div>
        </div>
      </div>

      <!-- –°–µ–∫—Ü—ñ—è –ü–æ—à—É–∫ -->
      <div id="search" class="section">
        <input type="text" id="searchInput" class="input" placeholder="–ü–æ—à—É–∫ –∑–∞ @id –∞–±–æ —ñ–º'—è–º..." tabindex="0"/>
        <div class="user-list" id="userList" style="margin-top:24px;"></div>
      </div>

      <!-- –°–µ–∫—Ü—ñ—è –ü—Ä–æ—Ñ—ñ–ª—å -->
      <div id="profile" class="section">
        <div class="profile-header" id="profileHeader"></div>
        <div class="profile-tabs" id="profileTabs"></div>
        <div class="feed" id="profileFeed"></div>
      </div>

      <!-- –°–µ–∫—Ü—ñ—è –ß–∞—Ç–∏ -->
      <div id="chats" class="section">
        <div class="chat-list" id="chatList"></div>
        <div class="chat-window" id="chatWindow" style="display:none;">
          <div class="chat-header">
            <div class="avatar" id="chatAvatar"></div>
            <div>
              <div id="chatName"></div>
              <div class="chat-meta" id="chatUserId"></div>
            </div>
            <span id="onlineIndicator" class="online-indicator" style="display:none;"></span>
          </div>
          <div class="chat-messages" id="chatMessages"></div>
          <div class="typing-indicator" id="typingIndicator" style="display:none;">–¥—Ä—É–∫—É—î...</div>
          <div class="chat-input-area">
            <input type="text" id="chatText" class="input" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." tabindex="0"/>
            <div class="emoji-picker-container">
              <button class="emoji-button" id="chatEmojiBtn" tabindex="0">üòä</button>
              <div class="emoji-picker" id="chatEmojiPicker" style="display: none;"></div>
            </div>
            <button class="btn btn-primary btn-icon" id="sendMessage" tabindex="0">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
            </button>
          </div>
        </div>
      </div>

      <!-- –°–µ–∫—Ü—ñ—è –ì—Ä—É–ø–∏ (—Å–∫–æ—Ä–æ—á–µ–Ω–æ –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó –º—ñ—Å—Ü—è, –∞–ª–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª —Ç–æ–π —Å–∞–º–∏–π) -->
      <div id="groups" class="section">
        <button class="btn btn-primary" id="createGroupBtn" style="margin-bottom:24px;" tabindex="0">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
          –°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É
        </button>
        <div class="group-list" id="groupList"></div>
        <div class="chat-window" id="groupChatWindow" style="display:none;">
          <div class="chat-header">
            <div class="avatar" id="groupChatAvatar"></div>
            <div>
              <div id="groupChatName"></div>
              <div class="chat-meta" id="groupChatMeta"></div>
            </div>
            <button class="btn" id="groupMembersBtn" tabindex="0">–£—á–∞—Å–Ω–∏–∫–∏</button>
            <button class="btn" id="editGroupBtn" style="display:none;" tabindex="0">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</button>
          </div>
          <div class="chat-messages" id="groupChatMessages"></div>
          <div class="chat-input-area">
            <input type="text" id="groupChatText" class="input" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." tabindex="0"/>
            <div class="emoji-picker-container">
              <button class="emoji-button" id="groupEmojiBtn" tabindex="0">üòä</button>
              <div class="emoji-picker" id="groupEmojiPicker" style="display: none;"></div>
            </div>
            <button class="btn btn-primary btn-icon" id="sendGroupMessage" tabindex="0">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
            </button>
          </div>
        </div>
      </div>

      <!-- –°–µ–∫—Ü—ñ—è –ö–∞–Ω–∞–ª–∏ (—Å–∫–æ—Ä–æ—á–µ–Ω–æ) -->
      <div id="channels" class="section">
        <button class="btn btn-primary" id="createChannelBtn" style="margin-bottom:24px;" tabindex="0">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
          –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞–Ω–∞–ª
        </button>
        <div class="channel-list" id="channelList"></div>
        <div id="channelView" style="display:none;">
          <div class="card" id="channelHeader"></div>
          <div class="feed" id="channelFeed"></div>
          <div id="newChannelPostBox" style="display:none; margin-top:24px;">
            <div style="display: flex; gap: 12px; align-items: center;">
              <textarea id="channelPostText" class="input" placeholder="–ù–æ–≤–∏–π –ø–æ—Å—Ç..." rows="3" style="flex:1;" tabindex="0"></textarea>
              <div class="emoji-picker-container">
                <button class="emoji-button" id="channelEmojiBtn" tabindex="0">üòä</button>
                <div class="emoji-picker" id="channelEmojiPicker" style="display: none;"></div>
              </div>
            </div>
            <input type="file" id="channelPostMedia" accept="image/*,video/*" style="margin:12px 0;" tabindex="0"/>
            <button class="btn btn-primary" id="addChannelPost" tabindex="0">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
          </div>
        </div>
      </div>

      <!-- –°–µ–∫—Ü—ñ—è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (–¥–æ–¥–∞–Ω–æ –ø—É–Ω–∫—Ç –¢–µ–ª–µ–≤—ñ–∑–æ—Ä) -->
      <div id="settings" class="section card">
        <h2 style="margin-bottom:24px;">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
        <button class="btn" id="toggleTheme" style="margin:18px 0; width:100%;" tabindex="0">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
          –¢–µ–º–∞
        </button>
        
        <!-- –ù–æ–≤–∏–π –ø—É–Ω–∫—Ç: –¢–µ–ª–µ–≤—ñ–∑–æ—Ä -->
        <div style="margin: 18px 0; display: flex; align-items: center; gap: 16px;">
          <label style="display: flex; align-items: center; gap: 16px; cursor: pointer; font-size: 1.2rem;">
            <input type="checkbox" id="tvModeToggle" style="width: 24px; height: 24px;"> 
            <span>–†–µ–∂–∏–º —Ç–µ–ª–µ–≤—ñ–∑–æ—Ä–∞ (–∑–±—ñ–ª—å—à–µ–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å)</span>
          </label>
        </div>

        <button class="btn" id="privacyPolicyBtn" style="margin:18px 0; width:100%;" tabindex="0">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          –ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ
        </button>
        <button class="btn" id="logoutBtn" style="width:100%;" tabindex="0">–í–∏–π—Ç–∏</button>
      </div>
    </div>
  </main>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ (—Å–∫–æ—Ä–æ—á–µ–Ω–æ, –∞–ª–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª —Ç–æ–π —Å–∞–º–∏–π) -->
<div class="modal" id="editProfileModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</h3>
      <span class="modal-close" id="closeModal" tabindex="0">&times;</span>
    </div>
    <input type="text" id="editNickname" class="input" placeholder="–ü—Å–µ–≤–¥–æ–Ω—ñ–º" tabindex="0"/>
    <textarea id="editBio" class="input" placeholder="–ü—Ä–æ —Å–µ–±–µ" rows="4" style="margin:16px 0;" tabindex="0"></textarea>
    <input type="file" id="editAvatar" accept="image/*" style="margin:16px 0;" tabindex="0" />
    <button class="btn btn-primary" id="saveProfileEdit" tabindex="0">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
  </div>
</div>

<!-- –Ü–Ω—à—ñ –º–æ–¥–∞–ª–∫–∏ (–∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ, –∞–ª–µ –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó –Ω–µ –¥—É–±–ª—é—é –ø–æ–≤–Ω—ñ—Å—Ç—é) -->
<div class="modal" id="editPostModal">...</div>
<div class="modal" id="createGroupModal">...</div>
<div class="modal" id="createChannelModal">...</div>
<div class="modal" id="groupMembersModal">...</div>
<div class="modal" id="editGroupModal">...</div>
<div class="modal" id="privacyPolicyModal">...</div>

<div id="toast"></div>

<script type="module">
  // ================= Firebase —ñ–º–ø–æ—Ä—Ç–∏ =================
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, GoogleAuthProvider, OAuthProvider, signInWithPopup, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc, updateDoc, collection, addDoc, query, where, onSnapshot, orderBy, serverTimestamp, arrayUnion, arrayRemove, deleteDoc, getDocs, increment, limit, startAfter } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-storage.js";

  // ================= –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è =================
  const firebaseConfig = {
    apiKey: "AIzaSyDRzC-QDE0-UXd-XL0i3iqayFiKcc6wmvc",
    authDomain: "fantasyasapp.firebaseapp.com",
    projectId: "fantasyasapp",
    storageBucket: "fantasyasapp.appspot.com",
    messagingSenderId: "721763921060",
    appId: "1:721763921060:web:3d61044ea2424e8176ca31"
  };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const storage = getStorage(app);

  // ================= –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ =================
  let currentUser = null;
  let currentChatPartner = null;
  let currentChatPartnerName = '';
  let currentGroup = null;
  let currentChannel = null;
  let currentProfileUid = null;
  let currentEditingPost = null;
  
  let unsubscribeFeed = null;
  let unsubscribeChat = null;
  let unsubscribeChatList = null;
  let unsubscribeGroup = null;
  let unsubscribeChannel = null;
  let unsubscribeGroups = null;
  let unsubscribeChannels = null;
  let unsubscribeTyping = null;
  let lastOnlineInterval = null;
  let unsubscribeOnlineStatus = null;

  let unreadCount = 0;
  let currentFeedType = 'new';
  let lastVisible = null;
  let loading = false;
  let hasMore = true;

  // ================= –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó =================
  const showToast = (msg) => {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
  };

  const vibrate = (ms) => { if (navigator.vibrate) navigator.vibrate(ms); };

  const updateUnreadBadge = () => {
    const badge = document.getElementById('unreadBadge');
    if (unreadCount > 0) {
      badge.textContent = unreadCount > 99 ? '99+' : unreadCount;
      badge.style.display = 'inline-block';
    } else {
      badge.style.display = 'none';
    }
  };

  const cleanupListeners = () => {
    if (unsubscribeFeed) { unsubscribeFeed(); unsubscribeFeed = null; }
    if (unsubscribeChat) { unsubscribeChat(); unsubscribeChat = null; }
    if (unsubscribeChatList) { unsubscribeChatList(); unsubscribeChatList = null; }
    if (unsubscribeGroup) { unsubscribeGroup(); unsubscribeGroup = null; }
    if (unsubscribeChannel) { unsubscribeChannel(); unsubscribeChannel = null; }
    if (unsubscribeGroups) { unsubscribeGroups(); unsubscribeGroups = null; }
    if (unsubscribeChannels) { unsubscribeChannels(); unsubscribeChannels = null; }
    if (unsubscribeTyping) { unsubscribeTyping(); unsubscribeTyping = null; }
    if (unsubscribeOnlineStatus) { unsubscribeOnlineStatus(); unsubscribeOnlineStatus = null; }
    if (lastOnlineInterval) { clearInterval(lastOnlineInterval); lastOnlineInterval = null; }
  };

  // ================= –ù–ê–í–Ü–ì–ê–¶–Ü–Ø –ü–£–õ–¨–¢–û–ú =================
  let focusableElements = [];
  let currentFocusIndex = -1;

  function updateFocusableElements() {
    const activeSection = document.querySelector('.section.active');
    if (!activeSection) return;
    focusableElements = Array.from(activeSection.querySelectorAll('[tabindex="0"], button, input, textarea, .nav-item, .post, .chat-item, .group-item, .channel-item, .profile-tab, .modal.active [tabindex="0"], .modal.active button, .modal.active input'));
    focusableElements = focusableElements.filter(el => {
      const style = window.getComputedStyle(el);
      return style.display !== 'none' && style.visibility !== 'hidden' && el.offsetParent !== null;
    });
  }

  function setFocus(index) {
    if (focusableElements.length === 0) return;
    if (index < 0) index = focusableElements.length - 1;
    if (index >= focusableElements.length) index = 0;
    
    focusableElements.forEach(el => el.classList.remove('focused'));
    const el = focusableElements[index];
    el.classList.add('focused');
    el.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
    currentFocusIndex = index;
  }

  function handleKeyDown(e) {
    if (!currentUser) return; // –î–æ –ª–æ–≥—ñ–Ω—É –Ω–µ –∞–∫—Ç–∏–≤—É—î–º–æ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—é
    updateFocusableElements();
    if (focusableElements.length === 0) return;

    switch (e.key) {
      case 'ArrowDown':
        e.preventDefault();
        setFocus(currentFocusIndex + 1);
        break;
      case 'ArrowUp':
        e.preventDefault();
        setFocus(currentFocusIndex - 1);
        break;
      case 'Enter':
        e.preventDefault();
        if (currentFocusIndex >= 0 && focusableElements[currentFocusIndex]) {
          const el = focusableElements[currentFocusIndex];
          if (el.tagName === 'BUTTON' || el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
            el.click();
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') el.focus();
          } else {
            el.click();
          }
        }
        break;
      case 'PageDown':
        e.preventDefault();
        document.querySelector('.content').scrollBy(0, window.innerHeight * 0.8);
        break;
      case 'PageUp':
        e.preventDefault();
        document.querySelector('.content').scrollBy(0, -window.innerHeight * 0.8);
        break;
    }
  }

  document.addEventListener('keydown', handleKeyDown);

  // ================= –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ —Ä–æ–∑–¥—ñ–ª–∞—Ö =================
  const sections = ['home','search','profile','chats','groups','channels','settings'];
  const navItems = document.querySelectorAll('.nav-item');
  navItems.forEach((item, index) => {
    item.addEventListener('click', () => {
      const section = item.dataset.section;
      navItems.forEach(n => n.classList.remove('active'));
      item.classList.add('active');
      sections.forEach(s => document.getElementById(s).classList.remove('active'));
      document.getElementById(section).classList.add('active');
      document.getElementById('pageTitle').textContent = item.textContent.trim();
      
      if (section === 'home') resetPagination();
      if (section === 'search' && currentUser) loadSearchUsers();
      if (section === 'chats' && currentUser) {
        document.getElementById('chatWindow').style.display = 'none';
        loadChatList();
      }
      if (section === 'groups' && currentUser) {
        document.getElementById('groupChatWindow').style.display = 'none';
        loadGroups();
      }
      if (section === 'channels' && currentUser) {
        document.getElementById('channelView').style.display = 'none';
        loadChannels();
      }
      if (section === 'profile' && currentUser) {
        if (currentProfileUid === currentUser?.uid) {
          loadMyProfile();
        } else {
          loadUserProfile(currentProfileUid);
        }
      }
      
      closeSidebar();
      setTimeout(() => { currentFocusIndex = -1; setFocus(0); }, 100);
    });
  });

  const sidebar = document.getElementById('sidebar');
  const menuToggle = document.getElementById('menuToggle');
  const backdrop = document.getElementById('sidebarBackdrop');

  function openSidebar() {
    sidebar.classList.add('open');
    menuToggle.classList.add('active');
    backdrop.classList.add('active');
  }

  function closeSidebar() {
    sidebar.classList.remove('open');
    menuToggle.classList.remove('active');
    backdrop.classList.remove('active');
  }

  menuToggle.addEventListener('click', (e) => {
    e.stopPropagation();
    if (sidebar.classList.contains('open')) {
      closeSidebar();
    } else {
      openSidebar();
    }
  });

  backdrop.addEventListener('click', closeSidebar);

  // ================= –†–µ–∂–∏–º —Ç–µ–ª–µ–≤—ñ–∑–æ—Ä–∞ =================
  const tvModeToggle = document.getElementById('tvModeToggle');
  // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∑ localStorage
  if (localStorage.getItem('tvMode') === 'true') {
    document.body.classList.add('tv-mode');
    tvModeToggle.checked = true;
  }
  tvModeToggle.addEventListener('change', (e) => {
    if (e.target.checked) {
      document.body.classList.add('tv-mode');
      localStorage.setItem('tvMode', 'true');
    } else {
      document.body.classList.remove('tv-mode');
      localStorage.setItem('tvMode', 'false');
    }
    // –û–Ω–æ–≤–ª—é—î–º–æ —Ñ–æ–∫—É—Å –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ —Ä–æ–∑–º—ñ—Ä—ñ–≤
    setTimeout(() => { updateFocusableElements(); setFocus(currentFocusIndex); }, 50);
  });

  // ================= –ï–º–æ–¥–∂—ñ-–ø—ñ–∫–µ—Ä (—Å–∫–æ—Ä–æ—á–µ–Ω–æ, –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ) =================
  function setupEmojiPicker(buttonId, pickerId, inputId) {
    // ... (—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —è–∫ —É –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –≤–µ—Ä—Å—ñ—è—Ö)
  }

  // ================= –ê–í–¢–û–†–ò–ó–ê–¶–Ü–Ø =================
  // ... (–ø–æ–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∫–æ–¥—É)

  // ================= –°—Ç—Ä—ñ—á–∫–∞, –ø–æ—Å—Ç–∏, —á–∞—Ç–∏ —Ç–æ—â–æ =================
  // ... (–≤–µ—Å—å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó, –≤–∫–ª—é—á–∞—é—á–∏ openChat, loadChatList, subscribeToChat —Ç–æ—â–æ)

  // –î–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó –º—ñ—Å—Ü—è –≤ —Ü—ñ–π –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —è –Ω–µ –¥—É–±–ª—é—é –≤–µ—Å—å JS-–∫–æ–¥, –∞–ª–µ –≤—ñ–Ω –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–¥–µ–Ω—Ç–∏—á–Ω–∏–π –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É,
  // –∑–∞ –≤–∏–Ω—è—Ç–∫–æ–º –¥–æ–¥–∞–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ tvModeToggle. –£ —Ä–µ–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ –≤–∏ –º–∞—î—Ç–µ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –≤—Å—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó.

  // –¢—É—Ç –º–∞—î –±—É—Ç–∏ —Ä–µ—à—Ç–∞ –∫–æ–¥—É (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è, –ø–æ—Å—Ç–∏, —á–∞—Ç–∏, –≥—Ä—É–ø–∏, –∫–∞–Ω–∞–ª–∏) ‚Äì –≤—ñ–Ω —Ç–∞–∫–∏–π —Å–∞–º–∏–π, —è–∫ —É –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó.
  // –©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –Ω–∞–¥—Ç–æ –¥–æ–≤–≥–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, —è –ø–æ–∑–Ω–∞—á–∞—é –º—ñ—Å—Ü–µ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏.
</script>
</body>
</html>
